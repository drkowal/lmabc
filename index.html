<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Linear Regression with Abundance-Based Constraints (ABCs) • lmabc</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Linear Regression with Abundance-Based Constraints (ABCs)">
<meta name="description" content='lmabc provides estimation and inference for linear regression with categorical covariates (race, sex, etc.). Common strategies, including the defaults in lm, select a "reference" group (e.g,. White, Male, etc.) and present all results relative to this group. However, this approach suffers from alarming biases, statistical inefficiencies, and limited interpretability. lmabc uses abundance-based constraints (ABCs) that (1) fully eliminate these biases, (2) provide appealing statistical properties related to estimation invariance and improved statistical power, and (3) produce more interpretable model output. lmabc reproduces the core functionality of lm and includes functions for generalized (logistic, Poisson, etc.) and penalized (lasso, ridge, etc.) linear models. Details are provided in Kowal (2024) &lt;doi:10.48550/arXiv.2408.00618&gt; and Kowal (2024) &lt;doi:10.1101/2024.01.04.23300033&gt;.'>
<meta property="og:description" content='lmabc provides estimation and inference for linear regression with categorical covariates (race, sex, etc.). Common strategies, including the defaults in lm, select a "reference" group (e.g,. White, Male, etc.) and present all results relative to this group. However, this approach suffers from alarming biases, statistical inefficiencies, and limited interpretability. lmabc uses abundance-based constraints (ABCs) that (1) fully eliminate these biases, (2) provide appealing statistical properties related to estimation invariance and improved statistical power, and (3) produce more interpretable model output. lmabc reproduces the core functionality of lm and includes functions for generalized (logistic, Poisson, etc.) and penalized (lasso, ridge, etc.) linear models. Details are provided in Kowal (2024) &lt;doi:10.48550/arXiv.2408.00618&gt; and Kowal (2024) &lt;doi:10.1101/2024.01.04.23300033&gt;.'>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">lmabc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/introduction.html">The 'ABCs' of `lmabc`: linear regression with categorical covariates</a></li>
    <li><a class="dropdown-item" href="articles/limitations.html">Limitations of lmabc</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/drkowal/lmabc/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="lmabc">
<code>lmabc</code><a class="anchor" aria-label="anchor" href="#lmabc"></a>
</h1></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Regression analysis commonly features categorical covariates, such as race, sex, group/experimental assignments, and many other examples. These variables are often interacted with (or <em>modify</em>) other variables, for example to infer group-specific effects of another variable <code>x</code> on the response <code>y</code> (e.g., does exposure to a pollutant <code>x</code> more adversely impact the health <code>y</code> of certain subpopulations?). However, default numerical encodings of categorical variables suffer from statistical inefficiencies, limited interpretability, and alarming biases, particularly for protected groups (race, sex, religion, national origin, etc.).</p>
<p><code>lmabc</code> addresses each of these problems, outlined below. <code>lmabc</code> provides estimation, inference, and prediction for linear regression with categorical covariates and interactions, including methods for penalized (lasso, ridge, etc.) and generalized (logistic, Poisson, etc.) regression. For ease of use, <code>lmabc</code> matches the functionality of <code>lm</code> and <code>glm</code>.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code>lmabc</code> is not yet on CRAN. The latest version can be installed and loaded from GitHub. The installation should take no more than a few seconds.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"drkowal/lmabc"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://drkowal.github.io/lmabc/">"lmabc"</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="default-strategies-the-problem">Default strategies: the problem<a class="anchor" aria-label="anchor" href="#default-strategies-the-problem"></a>
</h2>
<p>The predominant strategy for linear regression with categorical covariates is <em>reference group encoding</em> (RGE), which parametrizes and estimates the regression coefficients relative to a pre-selected reference category (this is equivalent to using <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">L-1</annotation></semantics></math> dummy variables to encode a categorical variable with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>L</mi><annotation encoding="application/x-tex">L</annotation></semantics></math> categories). For illustration, consider <code>race</code>, where the usual reference group is non-Hispanic White (NHW). This leads to several serious problems:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Presentation bias</strong>: RGE elevates a single group (e.g., NHW) above others. All other group-specific effects are presented relative to this group, which implicitly frames one group as “normal” and the others as “deviations from normal”. In all major statistical software (R, SAS, Python, MATLAB, Stata, etc.), the regression output for models of the form <code>y ~ x + race + x:race</code>, which is used to estimate group-specific <code>x</code> effects, presents the <code>x</code> effect without explicitly acknowledging that it actually refers to the <code>x</code> effect <em>for the reference (NHW) group</em>. A similar problem occurs for the intercept and is compounded for multiple categorical covariates and interactions. Alarmingly, this output can lead to misleading conclusions about the <code>x</code> effect for the broader population. For protected groups (race, sex, religion, national origin, etc.), this output is inequitable.</li>
<li>
<strong>Statistical bias</strong>: Modern statistical and machine learning methods commonly use regularization strategies, including penalized regression, variable selection, and Bayesian inference, to stabilize (i.e., reduce the variance of) estimators by “shrinking” coefficients toward zero. With RGE, the implication is that group-specific <code>x</code> effects are (racially) <em>biased</em> toward the reference (NHW) <code>x</code> effect. This bias also attenuates the estimated differences between each group-specific <code>x</code> effect and the reference (NHW) <code>x</code> effect, which undermines the ability to detect group-specific differences. Finally, it implies that model estimates and predictions are dependent on the choice of the reference group.</li>
<li>
<strong>Statistical inefficiencies</strong>: Adding interaction effects with another covariate (e.g., <code>x:race</code>) changes the estimates <em>and</em> the standard errors for the main <code>x</code> effect. As such, analysts may be reluctant to include interaction effects, especially if they lead to reductions in statistical power. This is usually the case: the main <code>x</code> effect in <code>y ~ x + race</code> is common to all (race) groups, while the main <code>x</code> effect in <code>y ~ x + race + x:race</code> is specific to the reference (NHW) group, and thus a subset of the data.</li>
<li>
<strong>Limited interpretability</strong>: Since RGE identifies each categorical covariate with a reference group, it becomes difficult to interpret the parameters, especially with multiple categorical covariates and interactions. Even the simple model <code>y ~ x + race + x:race</code> does not yield an obvious main (and appropriately global) <code>x</code> effect, since the coefficient on <code>x</code> corresponds to the <code>x</code> effect for the reference (NHW) group.</li>
</ol>
<p>These problems are not solved by changing the reference category. Other strategies, like sum-to-zero constraints, can address 1-2 but fail to address 3-4. Omitting constraints entirely is not feasible without some regularization, but regardless cannot solve 3-4 (and, for lasso estimation, tends to reproduce RGE, thus 1-2 resurface).</p>
</div>
<div class="section level2">
<h2 id="abcs-the-solution">ABCs: the solution<a class="anchor" aria-label="anchor" href="#abcs-the-solution"></a>
</h2>
<p><code>lmabc</code> resolves each of these problems for linear regression with categorical covariates. Using Abundance-Based Constraints (ABCs), <code>lmabc</code> includes estimation, inference, and prediction for penalized (lasso, ridge, etc.) and generalized (logistic, Poisson, etc.) regression with three key features, called “the EEI of ABCs”:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Efficiency</strong>: ABCs ensure that the estimated main <code>x</code> effects for <code>y ~ x + race</code> and <code>y ~ x + race + x:race</code> are <em>identical</em> (if <code>x</code> is also categorical; they are <em>nearly identical</em> if <code>x</code> is continuous, under some conditions). If the interaction effect (<code>x:race</code>) is small, then the standard errors for <code>x</code> are also (nearly) identical between the two models. When the interaction effect is large, the standard errors for <code>x</code> <em>decrease</em> for the model that includes the interaction. Remarkably, with ABCs, including the interaction has no negative consequences: the main effect estimates are (nearly) unchanged and the standard errors are either (nearly) unchanged or smaller.</li>
<li>
<strong>Equitability</strong>: Presentation biases and statistical biases are both eliminated. For models like <code>y ~ x + race + x:race</code>, the main <code>x</code> effect is parametrized and estimated as a “group-averaged” <code>x</code> effect. No single (race) group is elevated. Instead, all group-specific <code>x</code> effects are presented relative to the global (i.e., “group-averaged”) <code>x</code> effect. This also resolves the (racial) biases in regularized estimation: shrinkage is toward an appropriately global <code>x</code> effect, not the reference (NHW) <code>x</code> effect, with meaningful and equitable notions of sparsity.</li>
<li>
<strong>Interpretability</strong>: The <code>x</code> and <code>x:race</code> coefficients are parametrized as “group-averaged” <code>x</code>-effects and “group-specific deviations”, respectively. This, coupled with the aforementioned invariance properties for estimation and inference, enables straightforward interpretations of both main and interaction effects.</li>
</ol>
<p>While the benefits of equitability and interpretability are self-evident, we also emphasize the importance of statistical efficiency. For an analyst considering “main-only” models of the form <code>y ~ x + race</code>, ABCs allow the addition of interaction effects <code>x:race</code> “for free”: they have (almost) no impact on estimation and inference for the main <code>x</code> effect—unless the <code>x:race</code> interaction effect is strong, in which case the analyst gains <em>more power</em> for the main <code>x</code> effect. Yet by including the interaction, the analyst can now investigate group-specific <code>x</code> effects, again without negative consequences for the main effects. This is usually <em>not</em> the case for regression analysis, and does not occur for RGE (or other approaches).</p>
<p>These benefits apply to any categorical covariates. Generalizations for multiple continuous and categorical covariates and interactions are also available.</p>
</div>
<div class="section level2">
<h2 id="future-work">Future work<a class="anchor" aria-label="anchor" href="#future-work"></a>
</h2>
<p>Users can develop their own ABCs-inspired methods using the <code><a href="reference/getConstraints.html">getConstraints()</a></code> and <code><a href="reference/getFullDesign.html">getFullDesign()</a></code> methods in this package. Please email the package maintainer with any issues or questions.</p>
<p>The current implementation of <code>lmabc</code> is slightly slower than <code>lm</code>, but only for massive datasets. To benchmark, we constructed a 1 million row dataset and regressed a continuous outcome on two continuous predictors, three categorical predictors, a continuous-continuous interaction, a continuous-categorical interaction, and a categorical-categorical interaction. <code>lm</code> averaged 0.7 seconds, while <code>lmabc</code> averaged 3 seconds.</p>
</div>
<div class="section level2">
<h2 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h2>
<p><code>lmabc</code> requires the “base” R packages: <code>graphics</code>, <code>stats</code>, and <code>utils</code>. Ridge regression with ABCs requires <code>glmnet</code> with at least version 4.0, while lasso regression with ABCs requires <code>genlasso</code> with at least version 1.6.1.</p>
<p><code>lmabc</code> should work with any recent version of R, though it has been tested exclusively with versions after 4.0.0. No additional hardware is required to run <code>lmabc</code>.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Kowal, D. (2024). Facilitating heterogeneous effect estimation via statistically efficient categorical modifiers. <a href="https://arxiv.org/abs/2408.00618" class="external-link uri">https://arxiv.org/abs/2408.00618</a></p>
<p>Kowal, D. (2024). Regression with race-modifiers: towards equity and interpretability. <a href="https://doi.org/10.1101/2024.01.04.23300033" class="external-link uri">https://doi.org/10.1101/2024.01.04.23300033</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/drkowal/lmabc/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing lmabc</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Dan Kowal <br><small class="roles"> Author, maintainer </small>  </li>
<li>Prayag Gordy <br><small class="roles"> Author </small>  </li>
<li>Virginia Baskin <br><small class="roles"> Author </small>  </li>
<li>Jai Uparkar <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dan Kowal, Prayag Gordy, Virginia Baskin, Jai Uparkar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
